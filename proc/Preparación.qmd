---
title: "Trabajo 1: Reporte descriptivo en Quarto"
author: "Benajamin Ojeda y Miguel Tognarelli"
format: html
editor: visual
---

# Determinantes residenciales que motivan la decision del cambio de hogar en Chile

## Preparación

Descargamos los paquetes con los que nos dispondriamos a trabajar:

```{r}
pacman::p_load(sjlabelled,
               dplyr,
              stargazer, 
              sjmisc, 
              summarytools, 
              kableExtra, 
              sjPlot,
              corrplot, 
              sessioninfo, 
              ggplot2,
              knitr) 
```

## Descargamos nuestra base de datos

Nuestra base de datos con la que nos dispondriamos a trabajar seria la "Encuesta Longitudinal Social de Chile" realizada por el COES (Centro de Estudios de Conflicto y Cohesión social).

Y esta base la descargamos desde internet con el siguiente link:

```{r}
load(url("https://dataverse.harvard.edu/api/access/datafile/7245118"))
```

Exploramos la base de datos para saber sus dimensiones con el siguiente comando:

```{r}
dim(elsoc_long_2016_2022.2) 
```

Podemos apresiar que la base de datos cuenta con un total de 18035 observaciones que fueron realizadas desde el año 2016 al año 2022 y un total de 750 variables.

## Seleccion de variables

Para seleccionar nuestras variables utilizaremos el comando find_var, este comando nos permitiria localizar variables en la base de datos a partir de una palabra que sea de nuestro interes.

Dichas palabras que utilizaremos seria: varrio y satisfacción.

Palabra "Satisfaccion"

```{r}
find_var(data = elsoc_long_2016_2022.2, "satisfaccion")
```

Palabra "Barrio"

```{r}
find_var(data = elsoc_long_2016_2022.2,"barrio")
```

A partir de estas palabras podemos seleccionar que variables utilizar y tambien a partir de estas variables tambien podemos hacernos una idea de en que modulo podrian haber variables similares de nuestro interes en caso de querer localizarlas/emplearlas.

## Realizamos una sub-base con nuestras variables de interes

Algunas de estas variables se obtivieron a partir del uso del comando find:var, las otras fueron buscadas de forma manual el el logro de codigos utilizando de referencia las variables obtenidas por find_var.

```{r}
proc_data_2022 <- elsoc_long_2016_2022.2 %>% filter(ola=="6") %>% 
  select(Barrio_ideal=t02_01,
         Integra_barrio=t02_02,
         Identi_gente=t02_03, 
         Parte_barrio=t02_04,
         Cambio_hogar=t05,
         Satis_seguridad=t06_01,
         Satis_conectividad=t06_02,
         Satis_area_ocio=t06_03,
         Satis_barrio_limp=t06_04,
         Satis_cerca_trab=t06_05,
         Satis_cerca_coleg=t06_06,
         Satis_cerca_comerc=t06_07,
         Satis_cerca_amig_fami=t06_08,
         Satis_tamano_viv=t07_01,
         Satis_calidad_viv=t07_02,
         Frecue_peleas_calle=t09_01,
         Frecue_robo=t09_02,
         Frecue_trafico=t09_03,
         Frecue_ruido_moles=t11_01,
         Frecue_amenzas=t11_03,
         Frecue_vecino_sucio=t11_04
         )
```

Eliminamos los datos perdidos correspondientes a NS/NR (No sabe/No responde) y que estan numeradas como -999, -888 y -777

```{r}
proc_data_2022 <- proc_data_2022 %>% sjlabelled::set_na(., na = c(-999, -888, -777, -666))
```

Guardamos nuestra sub-base de datos obtenida en la carpeta imput

```{r}
save(proc_data_2022, file = "C:/Users/jmuno/OneDrive/Desktop/OFC_R/Ojeda-Tognarelli-Trabajo-1/imput/proc_data_2022.RData")

```

## Asignamos etiquetas a las variables
